
namespace exch {
  typedef JSON = {
    data : union[list[JSON],dict[str,JSON],str,f32]
  }

  func _decode_json(trg:JSON,src:str);
  func _encode_json(obj:JSON):str;

  func decode[T=JSON](src:str):T{
    x : union[list[T],dict[str,T],str,f32];
    j := T{data:x};
    _decode_json(j,src);
    return j;
  }
  func encode(obj:JSON):str{return _encode_json(obj);}
}
